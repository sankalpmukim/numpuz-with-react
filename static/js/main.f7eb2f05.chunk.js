(this["webpackJsonpnumpuz-with-react"]=this["webpackJsonpnumpuz-with-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},33:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n.n(r),i=n(23),a=n.n(i),s=(n(16),n(14)),l=n(8),o=(n(33),n(2)),u=function(e){return Object(o.jsx)("div",{className:"square",onClick:function(){return e.onClick()},children:e.value})},d=function(e){var t=e.squares.slice();return t=t.map((function(n,r){return Object(o.jsx)(u,{onClick:function(){return e.squareClick(r)},value:t[r]},r)})),Object(o.jsx)("div",{className:"board",style:{"--grid-size":e.gridSize},children:t})},j=function(e){return Object(o.jsxs)("div",{className:"timer",children:[Object(o.jsxs)("span",{className:"digits",children:[("0"+Math.floor(e.time/6e4%60)).slice(-2),":"]}),Object(o.jsxs)("span",{className:"digits",children:[("0"+Math.floor(e.time/1e3%60)).slice(-2),"."]}),Object(o.jsx)("span",{className:"digits mili-sec",children:("0"+e.time/10%100).slice(-2)})]})},O=n(11),b=n(12);O.a.initializeApp({apiKey:"AIzaSyDBixDXHM4NCrY27GGRPP3X7SozpeUNjzw",authDomain:"numpuz-c8a36.firebaseapp.com",projectId:"numpuz-c8a36",storageBucket:"numpuz-c8a36.appspot.com",messagingSenderId:"188829020133",appId:"1:188829020133:web:5b1c6f9c42aea6c584c90c",measurementId:"G-J8LHBKCHE8"});var f=c.a.createContext();f.displayName="Store";var h=function(){return c.a.useContext(f)},m=function(e){var t=e.children,n=e.initialState,r=e.reducer,i=c.a.useReducer(r,n),a=Object(l.a)(i,2),s=a[0],u=a[1];return Object(o.jsx)(f.Provider,{value:[s,u],children:t})},x=(n(39),n(40),"APP/AUTH/LOGIN"),g="APP/AUTH/LOGOUT",p={user:null,auth:O.a.auth(),firestore:O.a.firestore()},v=(n(15),function(){var e=h(),t=Object(l.a)(e,2),n=t[0].auth,r=t[1],c=Object(b.a)(n),i=Object(l.a)(c,1)[0];return Object(o.jsxs)("div",{className:"leaderboard full",children:[Object(o.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(o.jsx)("button",{className:"sign-in",onClick:function(){var e=new O.a.auth.GoogleAuthProvider;n.signInWithPopup(e),r(function(e){return{type:x,payload:e}}(i))},children:"Sign in with Google"})}),Object(o.jsx)("p",{children:"Do not violate the community guidelines or you will be banned for life!"})]})}),S=function(){var e=h(),t=Object(l.a)(e,2),n=t[0].auth,r=t[1];return n.currentUser&&Object(o.jsx)("button",{className:"sign-out",onClick:function(){r({type:g}),n.signOut()},children:"Sign Out"})},N=n(24),y=function(e){return Object(o.jsxs)("td",{children:[Object(o.jsxs)("span",{className:"time score",children:[("0"+Math.floor(e.time/6e4%60)).slice(-2),":"]}),Object(o.jsxs)("span",{className:"time score",children:[("0"+Math.floor(e.time/1e3%60)).slice(-2),"."]}),Object(o.jsx)("span",{className:"time mili-sec score",children:("0"+e.time/10%100).slice(-2)})]})},I=function(e){var t=h(),n=Object(l.a)(t,1)[0].auth.currentUser.uid,r=e.document,c=r.userName,i=r.score,a=r.photoUrl,s=n===r.uid?"current-user":"";return Object(o.jsxs)("tr",{className:s,children:[Object(o.jsx)("td",{colSpan:"1",children:e.rank}),Object(o.jsx)("td",{colSpan:"1",style:{width:"4rem"},children:Object(o.jsx)("img",{src:a,alt:c+"'s photo.",className:"image"})}),Object(o.jsx)("td",{colSpan:"1",children:c}),Object(o.jsx)(y,{time:i})]})},w=Object(r.forwardRef)((function(e,t){var n=h(),r=Object(l.a)(n,1)[0].auth.currentUser.uid,c=e.document,i=c.userName,a=c.score,s=c.photoUrl,u=r===c.uid?"current-user":"";return Object(o.jsxs)("tr",{ref:t,className:u,children:[Object(o.jsx)("td",{colSpan:"1",children:e.rank}),Object(o.jsx)("td",{colSpan:"1",style:{width:"4rem"},children:Object(o.jsx)("img",{src:s,alt:i+"'s photo.",className:"image"})}),Object(o.jsx)("td",{colSpan:"1",children:i}),Object(o.jsx)(y,{time:a})]})})),k=n(25),z=n(26),C=n(28),J=n(27),U=function(e){Object(C.a)(n,e);var t=Object(J.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(z.a)(n,[{key:"render",value:function(){return Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"#"}),Object(o.jsx)("th",{style:{width:"4rem"},children:"Image"}),Object(o.jsx)("th",{children:"Username"}),Object(o.jsx)("th",{children:"Best Score"})]})})}}]),n}(r.Component),A=function(e){var t=h(),n=Object(l.a)(t,1)[0],c=n.auth,i=n.firestore,a=Object(b.a)(c),s=Object(l.a)(a,1)[0],u=i.collection(String(e.gridSize)).orderBy("score","asc"),d=Object(N.a)(u,{idField:"uid"}),j=Object(l.a)(d,1)[0],O=Object(r.useState)(!0),f=Object(l.a)(O,2),m=f[0],x=f[1],g=Object(r.createRef)(),p=Object(r.createRef)();return s&&Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{className:"table-container",children:Object(o.jsxs)("table",{children:[Object(o.jsx)(U,{}),Object(o.jsx)("tbody",{children:j&&j.map((function(e,t){return 0===t?Object(o.jsx)(w,{document:e,rank:t+1,ref:g},e.uid):e.uid!==s.uid?Object(o.jsx)(I,{document:e,rank:t+1},e.uid):Object(o.jsx)(w,{document:e,rank:t+1,ref:p},e.uid)}))})]})}),Object(o.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:Object(o.jsx)("button",{onClick:function(e){m?(null!==p.current&&p.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),x(!1)):(g.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),x(!0))},children:m?"Scroll to you":"Scroll to top"})})]})},G=function(e){return Object(o.jsxs)("div",{className:"leaderboard full",children:[Object(o.jsxs)("div",{className:"full",children:[Object(o.jsxs)("div",{className:"full",children:["You are logged in as ",e.user.displayName]}),Object(o.jsx)(S,{})]}),Object(o.jsx)(A,{gridSize:e.gridSize})]})},E=function(e){var t=h(),n=Object(l.a)(t,1)[0].auth,r=Object(b.a)(n),c=Object(l.a)(r,1)[0];return c?Object(o.jsx)(G,{user:c,gridSize:e.gridSize}):Object(o.jsx)(v,{})},P=function(e){var t=Array.from({length:e*e},(function(e,t){return String(t+1)}));return t[t.length-1]="##",t.sort((function(){return Math.random()-.5})),t},M=function(e,t,n){var r=e[t];return e[t]=e[n],e[n]=r,e},R=function(){var e=Object(r.useState)(4),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(P(n)),a=Object(l.a)(i,2),u=a[0],f=a[1],m=Object(r.useState)(!1),x=Object(l.a)(m,2),g=x[0],p=x[1],v=Object(r.useState)(0),S=Object(l.a)(v,2),N=S[0],y=S[1],I=Object(r.useState)(!1),w=Object(l.a)(I,2),k=w[0],z=w[1],C=h(),J=Object(l.a)(C,1)[0],U=J.auth,A=J.firestore,G=Object(b.a)(U),R=Object(l.a)(G,1)[0];Object(r.useEffect)((function(){if(g&&R)if(console.log(R.uid),null!==localStorage.getItem(n)){if(console.log("won"),"undefined"===typeof JSON.parse(localStorage.getItem(n))[R.uid]||"undefined"!==typeof JSON.parse(localStorage.getItem(n))[R.uid]&&JSON.parse(localStorage.getItem(n))[R.uid]>N){var e=Object(s.a)({},JSON.parse(localStorage.getItem(n)));e[R.uid]=N,localStorage.setItem(n,JSON.stringify(e))}}else{var t={};t[R.uid]=N,localStorage.setItem(n,JSON.stringify(t))}}),[g,R,N,n]),Object(r.useEffect)((function(){if(g&&R){console.log(R.uid);var e=A.collection(String(n)).doc(R.uid);if(e.get().then((function(t){t.exists?t.data().score>N&&e.update({createdAt:O.a.firestore.FieldValue.serverTimestamp(),score:N}):e.set({uid:R.uid,createdAt:O.a.firestore.FieldValue.serverTimestamp(),userName:R.displayName,photoUrl:R.photoURL,score:N})})),null!==localStorage.getItem(n)){if(console.log("won"),"undefined"===typeof JSON.parse(localStorage.getItem(n))[R.uid]||"undefined"!==typeof JSON.parse(localStorage.getItem(n))[R.uid]&&JSON.parse(localStorage.getItem(n))[R.uid]>N){var t=Object(s.a)({},JSON.parse(localStorage.getItem(n)));t[R.uid]=N,localStorage.setItem(n,JSON.stringify(t))}}else{var r={};r[R.uid]=N,localStorage.setItem(n,JSON.stringify(r))}}}),[g,R,N,n,A]),Object(r.useEffect)((function(){n<2||n>10?(alert("Gridsize can only be between 2 and 10!"),c(4)):(f(P(n)),z(!1))}),[n]),Object(r.useEffect)((function(){null===R&&(f(P(n)),z(!1),p(!1),y(0))}),[R,n]),Object(r.useEffect)((function(){var e=u.slice();if(-1!==e.indexOf("##")){var t=Math.sqrt(e.length),n=Array.from({length:t*t},(function(e,t){return String(t+1)}));if(e[e.indexOf("##")]=String(e.length),function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(e,n))return console.log("Game won"),z(!1),void p(!0);p(!1)}else p(!0)}),[u]),Object(r.useEffect)((function(){var e=null;return k?e=setInterval((function(){y((function(e){return e+100}))}),100):clearInterval(e),function(){clearInterval(e)}}),[k]);var q=function(e){var t=u.indexOf("##");if(e===t)return 0;if(e%n===t%n)return 1;var r=t-t%n;return e>=r&&e<=r+n-1?-1:0};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Number puzzle!"}),Object(o.jsxs)("div",{className:"game",children:[Object(o.jsx)(d,{squares:u,gridSize:n,squareClick:function(e){k||!1!==g||(z(!0),y(0)),0!==q(e)&&!1===g&&(1===q(e)?function(e,t){var r=u.slice();if(e<t)for(;r.indexOf("##")!==e;)r=M(r,r.indexOf("##"),r.indexOf("##")-n);else if(e>t)for(;r.indexOf("##")!==e;)r=M(r,r.indexOf("##"),r.indexOf("##")+n);f(r)}(e,u.indexOf("##")):function(e,t){var n=u.slice();if(e<t)for(;n.indexOf("##")!==e;)n=M(n,n.indexOf("##"),n.indexOf("##")-1);else if(e>t)for(;n.indexOf("##")!==e;)n=M(n,n.indexOf("##"),n.indexOf("##")+1);f(n)}(e,u.indexOf("##")))}}),Object(o.jsxs)("div",{className:"details",children:[Object(o.jsx)("label",{htmlFor:"number",children:Object(o.jsxs)("h3",{children:["Decide grid size:",Object(o.jsx)("input",{type:"number",value:n,onChange:function(e){f(P(n)),z(!1),p(!1),y(0),c(Number(e.target.value))},id:"number",min:"2",max:"10"})]})}),Object(o.jsx)("div",{children:Object(o.jsx)("h3",{children:g?"Game won":"Game not won"})}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{className:"my-button",onClick:function(){f(P(n)),z(!1),p(!1),y(0)},children:"Reset board"})}),Object(o.jsx)(j,{time:N}),Object(o.jsx)(E,{gridSize:n})]})]})]})};a.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(m,{initialState:p,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,n={};switch(t.type){case x:n=Object(s.a)(Object(s.a)({},e),{},{user:t.payload});break;case g:n=Object(s.a)(Object(s.a)({},e),{},{user:null});break;default:throw new Error("Invalid Dispatch operation")}return n},children:Object(o.jsx)(R,{})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.f7eb2f05.chunk.js.map